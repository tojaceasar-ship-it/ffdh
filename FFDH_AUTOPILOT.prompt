FFDH AUTOPILOT PRIME v2.0

Tryb: Architect + Constructor + Validator + Forensic QA + Self-Healing Repair
Cel: Kompletny audyt, optymalizacja i samonaprawa projektu Fruits From Da Hood (FFDH) â€” poÅ‚Ä…czenie portalu artystyczno-modowego z ekosystemem AI â€Rewirâ€.

ğŸ§© ETAP 1 â€” AUTO-DETEKCJA I SYNTEZA

Przeskanuj wszystkie foldery: src, components, pages, context, hooks, api, assets, public.

Wykryj:

duplikaty kodu, nieuÅ¼ywane pliki, bÅ‚Ä™dne importy;

niespÃ³jnoÅ›Ä‡ nazw i struktur folderÃ³w;

komponenty naruszajÄ…ce zasadÄ™ â€Single Responsibilityâ€.

UtwÃ³rz dynamicznÄ… mapÄ™ zaleÅ¼noÅ›ci (FFDH_DEP_MAP.json).

Zidentyfikuj framework (Next.js lub Vite) i powiÄ…zania z Sanity / Supabase / Printful API.

âš™ï¸ ETAP 2 â€” AUTO-WYBÃ“R METOD I STRATEGII

Dla kaÅ¼dego punktu decyzyjnego (CMS, Auth, API, Routing, SSR/ISR/SSG, State Management, Tests):

wykryj moÅ¼liwe metody,

oblicz wynik jakoÅ›ci wedÅ‚ug kryteriÃ³w (stabilnoÅ›Ä‡, wydajnoÅ›Ä‡, zgodnoÅ›Ä‡, bezpieczeÅ„stwo, skalowalnoÅ›Ä‡, DX, utrzymanie).

Zastosuj formuÅ‚Ä™ oceny:

wynik = Î£ (waga_kryterium Ã— ocena_0â€“1) Â± (bonusy - kary)


Wybierz Top-1 metodÄ™, zapisz w FFDH_METHOD_DECISIONS.json i uzasadnij wybÃ³r.

JeÅ›li rÃ³Å¼nica < 0.05 â†’ aktywuj Plan B (feature flag z metodÄ… alternatywnÄ…).

ğŸ” ETAP 3 â€” AUDYT TECHNICZNO-STRUKTURALNY

Wykryj bÅ‚Ä™dy logiczne:

bÅ‚Ä™dne zaleÅ¼noÅ›ci w useEffect,

nieuÅ¼ywane useMemo, brak cleanupÃ³w,

bÅ‚Ä™dy typÃ³w (any, null access).

Przeanalizuj routing i context â€” martwe linki, nieuÅ¼ywane providery.

SprawdÅº testy: brakujÄ…ce pokrycie (<70%), nieuÅ¼ywane mocki, snapshoty bez logiki.

Zidentyfikuj naruszenia zasad SOLID i DRY.

ğŸ” ETAP 4 â€” AUDYT BEZPIECZEÅƒSTWA I KONFIGURACJI

SprawdÅº .env, next.config.js, package.json, api/printful.js, supabase.ts.

Wykryj:

twarde klucze API,

brak CSP, brak try/catch,

brak walidacji danych wejÅ›ciowych,

nieszczelne endpointy,

ryzyko XSS / CSRF / CORS.

Oznacz bÅ‚Ä™dy wg wagi: [CRIT], [HIGH], [MED], [LOW].

Zapisz w raporcie FFDH_SECURITY_AUDIT.md.

âš¡ ETAP 5 â€” AUDYT WYDAJNOÅšCI

Zbadaj build (next build / vite build) i rozmiary bundli.

SprawdÅº:

code splitting, lazy loading, tree shaking;

duÅ¼e zaleÅ¼noÅ›ci (moment, lodash, dayjs);

nadmiar renderÃ³w, brak memoizacji;

preload obrazÃ³w, parametry priority, loading="lazy".

Oblicz wynik Lighthouse (mobile/desktop) i generuj FFDH_PERF_REPORT.md.

ğŸ¨ ETAP 6 â€” DOSTÄ˜PNOÅšÄ† I UX

SprawdÅº dostÄ™pnoÅ›Ä‡ (alt texty, aria-labels, kontrast, focus trap).

OceÅ„ uÅ¼ytecznoÅ›Ä‡ formularzy i stanÃ³w hover/focus.

SprawdÅº Framer Motion â€” zapewnij â€reduce motionâ€ fallback.

Wykryj niespÃ³jne kolory i brak stylu przyciskÃ³w.

Raportuj w sekcji UX.

ğŸ§® ETAP 7 â€” ANALIZA API I INTEGRACJI

SprawdÅº /api/printful, /api/auth, /api/scenes, /api/characters:

walidacja danych wejÅ›ciowych,

obsÅ‚uga statusÃ³w HTTP,

caching i retry,

logowanie bÅ‚Ä™dÃ³w.

Dodaj lub napraw fetchWithRetry i schema.validate() (Zod/Yup).

SprawdÅº Supabase/Sanity queries â€” unikaÄ‡ select *.

ğŸ§ª ETAP 8 â€” TESTY I RAPORT

Uruchom testy: build, lint, unit, e2e, accessibility, Lighthouse.

Wygeneruj raport:

# ğŸ§­ FFDH RADAR v2.0
Build: PASS
Lint: PASS
Tests: 84% coverage
Security: 2 [HIGH], 1 [MED]
Performance: 92 (mobile) / 95 (desktop)
UX: minor issues (2 low)


DoÅ‚Ä…cz sekcjÄ™:

Top 10 bÅ‚Ä™dÃ³w (z lokalizacjÄ… i typem),

Propozycje napraw,

Priorytety (1 = krytyczne).

ğŸ©¹ ETAP 9 â€” AUTO-NAPRAWA (Self-Healing Mode)

Napraw bÅ‚Ä™dy [CRIT] i [HIGH]:

przenieÅ› klucze API do .env,

dodaj walidacjÄ™ w endpointach,

wprowadÅº memoizacjÄ™ i lazy loading.

Refaktoruj delikatnie â€” zachowuj kontrakty.

UtwÃ³rz patch: FFDH_PATCH_LOG.md.

Uruchom testy regresyjne.

W przypadku niepowodzenia â†’ rollback.

ğŸ§¾ KOÅƒCOWY RAPORT ZBIORCZY

Wygeneruj plik: reports/FFDH_AUDIT_FULL.md

# ğŸ‰ FFDH AUTOPILOT PRIME v2.0 â€“ RAPORT KOÅƒCOWY

## 1ï¸âƒ£ Ocena projektu
| Obszar | Wynik | Uwagi |
|--------|--------|-------|
| Struktura | 83 | lekki chaos w src/components |
| Logika | 76 | duplikacja scen |
| BezpieczeÅ„stwo | 64 | 2 krytyczne braki w API |
| WydajnoÅ›Ä‡ | 91 | dobry split, brak cache dla Supabase |
| UX / A11y | 78 | kontrast + focus |
| Testy | 58 | niskie pokrycie |

Åšrednia waÅ¼ona: 75/100  
**Poziom ryzyka:** UMIARKOWANY  
**Zalecane dziaÅ‚ania:** refaktor API, testy jednostkowe, optymalizacja obrazÃ³w.

## 2ï¸âƒ£ Naprawy automatyczne
- Klucze API â†’ `.env`
- Dodano `fetchWithRetry()`
- WÅ‚Ä…czono `memo` i lazy load
- Poprawiono aria-label w 6 przyciskach

## 3ï¸âƒ£ Ryzyko regresji
PrawdopodobieÅ„stwo: 8%  
ZasiÄ™g: niski (frontend only)

## 4ï¸âƒ£ Sugerowany cykl utrzymania
- Tygodniowy radar: `FFDH_QA_WEEKLY`
- MiesiÄ™czny audyt wydajnoÅ›ci
- StaÅ‚y backup Sanity + Supabase

âš¡ TRYB AKTYWACJI
/ACTIVATE FFDH-AUTOPILOT
MODE: Full Sweep â†’ Decision â†’ Audit â†’ Repair â†’ Report
TARGET: main + rewir + shop
DEPTH: 100%
ROLLBACK: enabled
OUTPUT:
  - /reports/FFDH_AUDIT_FULL.md
  - /reports/FFDH_RADAR.md
  - /decisions/FFDH_METHOD_DECISIONS.json
  - /patches/FFDH_PATCH_LOG.md
POLICY:
  - Lighthouse â‰¥ 95
  - Test coverage â‰¥ 70%
  - No critical security leaks

ğŸ§¬ FUNKCJE WSPOMAGAJÄ„CE

AI-Method Selector: automatycznie wybiera technologie (Supabase vs Sanity, Zustand vs Context).

Forensic QA Engine: punktuje kaÅ¼dy plik i moduÅ‚.

Risk Estimator: szacuje % prawdopodobieÅ„stwa regresji po naprawach.

Auto-Rollback: przywraca poprzedni commit w razie krytycznych bÅ‚Ä™dÃ³w.

Self-Healing Loop: ponawia testy po kaÅ¼dej poprawce.

ğŸ” TRYB â€RADAR LOOPâ€

Aby uruchamiaÄ‡ cykliczny audyt:

/ACTIVATE FFDH-RADAR-LOOP
FREQ: weekly
TASK: Full QA sweep + Repair summary
OUTPUT: /reports/weekly/FFDH_Radar_[DATE].md
